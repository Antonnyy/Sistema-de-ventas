<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inicio â€“ Sistema de Ventas</title>
  <link rel="stylesheet" href="../CSS/Main.css" />
  <link rel="stylesheet" href="../CSS/Navbar.css" />
  <link rel="stylesheet" href="../CSS/Footer.css" />
</head>
<body>
  <!-- Navbar dinÃ¡mico -->
  <header id="navbar"></header>

  <!-- Hero -->
  <header class="hero">
    <h1>Bienvenido a tu Sistema de Ventas</h1>
    <p class="sub">Administra tu bodega Josdin: ventas, inventario, delivery y mÃ¡s.</p>
    <div class="hero-actions">
      <a class="btn primary" href="Catalogo.html">Abrir CatÃ¡logo</a>
      <a class="btn ghost" href="Contacto.html">Contactos</a>
    </div>
  </header>

  <main class="wrapper">
    <!-- Atajos rÃ¡pidos -->
    <section class="quick grid-4">
      <a class="qcard fade-up" style="--d:.0s" href="Catalogo.html">
        <span class="ico">ğŸ›’</span>
        <h3>CatÃ¡logo</h3>
        <p>Gestiona productos y stock mÃ­nimo.</p>
      </a>
      <a class="qcard fade-up" style="--d:.06s" href="Publicidad.html">
        <span class="ico">ğŸ“¢</span>
        <h3>Publicidad</h3>
        <p>Promociones y banners para tu tienda.</p>
      </a>
      <a class="qcard fade-up" style="--d:.12s" href="Delivery.html">
        <span class="ico">ğŸšš</span>
        <h3>Delivery</h3>
        <p>Registra pedidos y consulta historial.</p>
      </a>
      <a class="qcard fade-up" style="--d:.18s" href="Contacto.html">
        <span class="ico">ğŸ“</span>
        <h3>Contacto</h3>
        <p>Canales de atenciÃ³n y ubicaciÃ³n.</p>
      </a>
    </section>

    <!-- Resumen rÃ¡pido -->
    <section class="cards">
      <article class="card fade-up" style="--d:.0s">
        <div class="stat">
          <div>
            <h4>Pedidos de Delivery (hoy)</h4>
            <p class="muted">Total registrados por fecha</p>
          </div>
          <strong id="kpi-delivery-hoy">0</strong>
        </div>
      </article>

      <article class="card fade-up" style="--d:.06s">
        <div class="stat">
          <div>
            <h4>Pedidos Pendientes</h4>
            <p class="muted">En espera o en camino</p>
          </div>
          <strong id="kpi-delivery-pend">0</strong>
        </div>
      </article>

      <article class="card fade-up" style="--d:.12s">
        <div class="stat">
          <div>
            <h4>Productos con bajo stock</h4>
            <p class="muted">Basado en tu stock mÃ­nimo</p>
          </div>
          <strong id="kpi-bajostock">â€”</strong>
        </div>
      </article>
    </section>

    <!-- SecciÃ³n destacada -->
    <section class="highlight fade-up" style="--d:.18s">
      <h2>Consejo</h2>
      <p>Activa tus combos (p. ej., â€œPack desayunoâ€) y muestra promociones en la secciÃ³n Publicidad para aumentar el ticket promedio.</p>
    </section>
  </main>

  <!-- Footer dinÃ¡mico -->
  <footer id="footer"></footer>

  <!-- Scripts -->
  <script>
    // Navbar
    fetch("../HTML/Navbar.html").then(r=>r.text()).then(h=>{
      document.getElementById("navbar").innerHTML = h;
      const t=document.querySelector(".menu-toggle"), l=document.querySelector(".nav-links");
      if(t && l){ t.addEventListener("click", ()=> l.classList.toggle("active")); }
    });
    // Footer
    fetch("../HTML/Footer.html").then(r=>r.text()).then(h=>{
      document.getElementById("footer").innerHTML = h;
    });

    // ===== KPIs rÃ¡pidos (no requiere backend) =====
    (function kpis(){
      // Delivery (usa la misma clave que te di en delivery.js)
      const STORAGE_KEY = "delivery_pedidos";
      let rows = [];
      try{ rows = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]"); }catch(e){ rows = []; }

      const today = new Date(); today.setHours(0,0,0,0);
      const isToday = iso => { const d=new Date(iso); d.setHours(0,0,0,0); return d.getTime()===today.getTime(); };

      const hoy = rows.filter(p => isToday(p.fecha)).length;
      const pend = rows.filter(p => p.estado==="PENDIENTE" || p.estado==="EN_CAMINO").length;

      document.getElementById("kpi-delivery-hoy").textContent = hoy;
      document.getElementById("kpi-delivery-pend").textContent = pend;

      // Bajo stock (si ya manejas stock en localStorage o mÃ¡s adelante desde API)
      // Si aÃºn no tienes fuente, lo dejamos en "â€”"
      document.getElementById("kpi-bajostock").textContent = "â€”";
    })();
  </script>
</body>
</html>
